module.exports=function(e){function t(o){if(n[o])return n[o].exports;var r=n[o]={exports:{},id:o,loaded:!1};return e[o].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){var o=n(2);e.exports=o.fromExpress(n(3))},,function(e,t){e.exports=require("webtask-tools")},function(e,t,n){var o=n(4),r=n(5),s=(n(2),o()),a=n(14);s.use(o.static(__dirname+"/public")),s.use(function(e,t,n){r({clientName:"Custom Social Connections",scopes:"read:connections create:connections update:connections delete:connections read:clients",audience:function(e){return"https://"+e.webtaskContext.data.AUTH0_DOMAIN+"/api/v2/"},rootTenantAuthority:e.webtaskContext.data.AUTH0_RTA})(e,t,n)}),s.get("/",function(e,t){t.header("Content-Type","text/html"),t.status(200).send(a({baseUrl:t.locals.baseUrl,manageUrl:e.webtaskContext.data.AUTH0_MANAGE_URL||"https://manage.auth0.com",rta:e.webtaskContext.data.AUTH0_RTA||"https://auth0.auth0.com"}))}),e.exports=s},function(e,t){e.exports=require("express")},function(e,t,n){function o(e){return e&&"[object Function]"==h.call(e)}function r(e){return function(t,n,o){f.get(e+"/userinfo").set("Authorization","Bearer "+t.body.access_token).end(function(e,r){return e?void n.redirect(n.locals.baseUrl):(t.userInfo=r.body,void o())})}}function s(e,t){return function(n,r,s){var a=e;o(e)&&(a=e(n)),n.apiToken=d.sign(n.userInfo,a,{algorithm:"HS256",issuer:r.locals.baseUrl,expiresIn:t}),delete n.userinfo,s()}}var a=n(4),i=n(6),c=n(7),l=n(8),u=n(9),p=n(10),d=n(11),f=n(12),h={}.toString;e.exports=function(e){var t=864e5,o=a.Router(),d=function(e,t,n){n()},f=[d];return e=e||{},e.clientName=e.clientName||"Auth0 Extension",e.clientId=e.clientId,e.exp=e.exp||t,e.credentialsRequired="undefined"!=typeof e.credentialsRequired&&e.credentialsRequired,e.scopes=e.scopes+" openid profile",e.responseType=e.responseType||"token",e.tokenExpiresIn=e.tokenExpiresIn||"10h",e.rootTenantAuthority=e.rootTenantAuthority||"https://auth0.auth0.com",e.authenticatedCallback=e.authenticatedCallback||function(e,t,n,o){o()},e.apiToken&&!e.apiToken.secret&&(console.log('You are using a "development secret" for API token generation. Please setup your secret on "apiToken.secret".'),e.apiToken.secret=n(13).randomBytes(32).toString("hex")),e.apiToken&&e.apiToken.secret&&(f=[r(e.rootTenantAuthority),e.apiToken.payload||d,s(e.apiToken.secret,e.tokenExpiresIn)]),o.use(function(t,n,o){var r="https",s=l.parse(t.originalUrl).pathname.replace(t.path,"");"development"===(process.env.NODE_ENV||"development")&&(r=t.protocol,e.clientId=e.clientId||"N3PAwyqXomhNu6IWivtsa3drBfFjmWJL"),n.locals.baseUrl=l.format({protocol:r,host:t.get("host"),pathname:s}),o()}),o.use(p.urlencoded({extended:!1})),o.use(c({secret:u(),algorithms:["RS256"],credentialsRequired:e.credentialsRequired}).unless({path:["/login","/callback"]})),o.get("/login",function(t,n){var o=n.locals.baseUrl+"/callback";t.query.returnTo&&(o+="?returnTo="+encodeURIComponent(t.query.returnTo));var r;if("string"==typeof e.audience)r="&audience="+encodeURIComponent(e.audience);else if("function"==typeof e.audience){var s=e.audience(t);"string"==typeof s&&(r="&audience="+encodeURIComponent(s))}var a=[e.rootTenantAuthority+"/i/oauth2/authorize","?client_id="+(e.clientId||n.locals.baseUrl),"&response_type="+e.responseType,"&response_mode=form_post","&scope="+encodeURIComponent(e.scopes),"&expiration="+e.exp,"&redirect_uri="+o,r].join("");n.redirect(a)}),o.get("/logout",function(t,n){var o=["html","  head","    script.","      sessionStorage.removeItem('token')","      sessionStorage.removeItem('apiToken')","      window.location.href = '"+e.rootTenantAuthority+"/v2/logout?returnTo=#{baseUrl}&client_id=#{baseUrl}';","  body"].join("\n"),r=i.compile(o)({baseUrl:n.locals.baseUrl});n.header("Content-Type","text/html"),n.status(200).send(r)}),o.post("/callback",f,function(t,n){e.authenticatedCallback(t,n,t.body.access_token,function(e){if(e)return n.sendStatus(500);var o=["html","  head","    script.","      sessionStorage.setItem('token', '"+t.body.access_token+"');",1===f.length?"":"      sessionStorage.setItem('apiToken', '"+t.apiToken+"');","      window.location.href = '#{returnTo}';","  body"].join("\n"),r=i.compile(o)({returnTo:t.query.returnTo?t.query.returnTo:n.locals.baseUrl});n.header("Content-Type","text/html"),n.status(200).send(r)})}),o.get("/.well-known/oauth2-client-configuration",function(t,n){n.header("Content-Type","application/json"),n.status(200).send({redirect_uris:[n.locals.baseUrl+"/callback"],client_name:e.clientName,post_logout_redirect_uris:[n.locals.baseUrl]})}),o}},function(e,t){e.exports=require("pug")},function(e,t){e.exports=require("express-jwt")},function(e,t){e.exports=require("url")},function(e,t){e.exports=require("auth0-api-jwt-rsa-validation")},function(e,t){e.exports=require("body-parser")},function(e,t){e.exports=require("jsonwebtoken")},function(e,t){e.exports=require("superagent")},function(e,t){e.exports=require("crypto")},function(e,t,n){var o=n(15);e.exports=function(e){var t,n=[],r=e||{};return function(e,r,s,a){n.push('<!DOCTYPE html><html><head><title>Custom Social Connections</title><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=Edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="description"'+o.attr("content",""+r,!0,!0)+'><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="shortcut icon" href="https://cdn.auth0.com/styleguide/2.0.1/lib/logos/img/favicon.png"><link rel="apple-touch-icon" href="apple-touch-icon.png"><link rel="stylesheet" type="text/css" href="https://cdn.auth0.com/manage/v0.3.973/css/index.min.css"><link rel="stylesheet" type="text/css" href="https://cdn.auth0.com/styleguide/3.1.6/index.css"><link rel="stylesheet" type="text/css" href="https://cdn.auth0.com/extensions/custom-social-connections/assets/custom-social-connections-1.2.2.min.css"><script type="text/javascript" src="https://code.jquery.com/jquery-2.1.4.min.js"></script><script type="text/javascript" src="https://fb.me/react-0.14.0.min.js"></script><script type="text/javascript" src="https://fb.me/react-dom-0.14.0.js"></script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/babel-core/5.8.23/browser.min.js"></script><script type="text/javascript" src="https://cdn.auth0.com/js/jwt-decode-1.4.0.min.js"></script><script type="text/javascript" src="https://cdn.auth0.com/js/navbar-1.0.4.min.js"></script><script type="text/javascript" src="https://cdn.auth0.com/js/m/metrics-1.4.js"></script><script type="text/javascript">function useragentChecks () {\n  var browser = navigator.userAgent.toLowerCase();\n\n  var firefox = (browser.indexOf(\'firefox\') > -1);\n\n  if(firefox) {\n    $(\'body\').addClass(\'is-ff\');\n  }\n\n  var edge = (browser.indexOf(\'edge\') > -1);\n  if (edge){\n    $(\'body\').addClass(\'is-edge\');\n  }\n}\n\nif (!sessionStorage.getItem("token")) {\n  window.location.href = \''+o.escape(null==(t=e)?"":t)+'/login\';\n}\n</script></head></html><body onLoad="useragentChecks()" class="a0-extension"><header class="dashboard-header"><nav role="navigation" class="navbar navbar-default"><div class="container"><div class="navbar-header"><h1 class="navbar-brand"><a'+o.attr("href",""+s+"/",!0,!0)+'><span>Auth0</span></a></h1></div><div id="navbar-collapse" class="collapse navbar-collapse"><script type="text/babel">ReactDOM.render(\n  <Navbar baseUrl="'+o.escape(null==(t=e)?"":t)+"\" domain='"+o.escape(null==(t=a)?"":t)+'\'/>,\n  document.getElementById(\'navbar-collapse\')\n);\n</script></div></div></nav></header><div class="container"><div class="row"><section class="content-page current"><div class="col-xs-12"><div class="row"><div class="col-xs-12 content-header"><ol class="breadcrumb"><li><a'+o.attr("href",""+s+"/",!0,!0)+' target="_blank">Auth0 Dashboard</a></li><li><a'+o.attr("href",""+s+"/#/extensions",!0,!0)+" target=\"_blank\">Extensions</a></li></ol></div></div></div></section><div id=\"content-area\" class=\"tab-content\"><script type=\"text/javascript\">window.env = {\n  webtasks: {\n    shareUrl:     'https://sandbox.it.auth0.com/api/run/auth0-extensions/custom-connections/share?webtask_no_cache=1',\n    templatesUrl: 'https://sandbox.it.auth0.com/api/run/auth0-extensions/custom-connections/sync?webtask_no_cache=1'\n  },\n  userUrl: (function () {\n    var value = null;\n\n    try {\n      value = jwt_decode(window.sessionStorage.getItem('token')).aud[0].replace('/api/v2', '/authorize');\n    } catch (err) {\n      console.log('Token could not be decoded');\n    }\n\n    return value;\n  })(),\n  manageUrl: '"+o.escape(null==(t=s)?"":t)+'\'\n};</script><script src="https://cdn.auth0.com/extensions/custom-social-connections/assets/custom-social-connections-1.2.2.min.js"></script></div></div></div></body>')}.call(this,"baseUrl"in r?r.baseUrl:"undefined"!=typeof baseUrl?baseUrl:void 0,"description"in r?r.description:"undefined"!=typeof description?description:void 0,"manageUrl"in r?r.manageUrl:"undefined"!=typeof manageUrl?manageUrl:void 0,"rta"in r?r.rta:"undefined"!=typeof rta?rta:void 0),n.join("")}},function(e,t,n){"use strict";function o(e){return null!=e&&""!==e}function r(e){return(Array.isArray(e)?e.map(r):e&&"object"==typeof e?Object.keys(e).filter(function(t){return e[t]}):[e]).filter(o).join(" ")}function s(e){return i[e]||e}function a(e){var t=String(e).replace(c,s);return t===""+e?e:t}t.merge=function e(t,n){if(1===arguments.length){for(var r=t[0],s=1;s<t.length;s++)r=e(r,t[s]);return r}var a=t.class,i=n.class;(a||i)&&(a=a||[],i=i||[],Array.isArray(a)||(a=[a]),Array.isArray(i)||(i=[i]),t.class=a.concat(i).filter(o));for(var c in n)"class"!=c&&(t[c]=n[c]);return t},t.joinClasses=r,t.cls=function(e,n){for(var o=[],s=0;s<e.length;s++)n&&n[s]?o.push(t.escape(r([e[s]]))):o.push(r(e[s]));var a=r(o);return a.length?' class="'+a+'"':""},t.style=function(e){return e&&"object"==typeof e?Object.keys(e).map(function(t){return t+":"+e[t]}).join(";"):e},t.attr=function(e,n,o,r){return"style"===e&&(n=t.style(n)),"boolean"==typeof n||null==n?n?" "+(r?e:e+'="'+e+'"'):"":0==e.indexOf("data")&&"string"!=typeof n?(JSON.stringify(n).indexOf("&")!==-1&&console.warn("Since Jade 2.0.0, ampersands (`&`) in data attributes will be escaped to `&amp;`"),n&&"function"==typeof n.toISOString&&console.warn("Jade will eliminate the double quotes around dates in ISO form after 2.0.0")," "+e+"='"+JSON.stringify(n).replace(/'/g,"&apos;")+"'"):o?(n&&"function"==typeof n.toISOString&&console.warn("Jade will stringify dates in ISO form after 2.0.0")," "+e+'="'+t.escape(n)+'"'):(n&&"function"==typeof n.toISOString&&console.warn("Jade will stringify dates in ISO form after 2.0.0")," "+e+'="'+n+'"')},t.attrs=function(e,n){var o=[],s=Object.keys(e);if(s.length)for(var a=0;a<s.length;++a){var i=s[a],c=e[i];"class"==i?(c=r(c))&&o.push(" "+i+'="'+c+'"'):o.push(t.attr(i,c,!1,n))}return o.join("")};var i={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"},c=/[&<>"]/g;t.escape=a,t.rethrow=function e(t,o,r,s){if(!(t instanceof Error))throw t;if(!("undefined"==typeof window&&o||s))throw t.message+=" on line "+r,t;try{s=s||n(16).readFileSync(o,"utf8")}catch(n){e(t,null,r)}var a=3,i=s.split("\n"),c=Math.max(r-a,0),l=Math.min(i.length,r+a),a=i.slice(c,l).map(function(e,t){var n=t+c+1;return(n==r?"  > ":"    ")+n+"| "+e}).join("\n");throw t.path=o,t.message=(o||"Jade")+":"+r+"\n"+a+"\n\n"+t.message,t},t.DebugItem=function(e,t){this.lineno=e,this.filename=t}},function(e,t){e.exports=require("fs")}]);